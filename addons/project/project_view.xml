<?xml version='1.0'?>
<terp>
    <data>
        <menuitem name='Project Management' icon='terp-project' id='menu_main'/>
        <menuitem name='Project Management/Configuration' sequence='1' groups='base.group_admin' id='menu_definitions'/>
        
        <!-- Project -->
        <record id='edit_project' model='ir.ui.view'>
            <field name='name'>project.project.form</field>
            <field name='model'>project.project</field>
            <field name='type'>form</field>
            <field name='arch' type='xml'>
                <form string='Project'>
                    <notebook>
                        <page string='Administration'>
                            <field name='name' select='1'/>
                            <group col='3' colspan='2'>
                                <field name='active' select='2'/>
                                <button name='toggleActive' type='object' string='Toggle activity'/>
                            </group>
                            <field name='manager' select='1'/>
                            <field name='warn_manager'/>
                            <newline/>
                            <field name='priority'/>
                            <field name='parent_id'/>
                            <field name='date_start'/>
                            <field name='date_end'/>
                            <field name='planned_hours' widget='float_time'/>
                            <field name='effective_hours' widget='float_time'/>
                            <field name='timesheet_id'/>
                            <field name='state'/>
                            <separator string='Project&apos;s members' colspan='4'/>
                            <field name='members' nolabel='1' colspan='4'/>
                        </page>
                        <page groups='base.group_extended' string='Partner Info'>
                            <field name='partner_id' on_change='onchange_partner_id(partner_id)' select='1' colspan='4'/>
                            <field name='contact_id' domain='[(&apos;partner_id&apos;,&apos;=&apos;,partner_id)]' select='2'/>
                            <field name='category_id' select='2'/>
                            <field name='pricelist_id'/>
                            <field name='warn_customer'/>
                            <field name='mode'/>
                            <field name='tariff'/>
                            <separator string='Mail texts' colspan='4'/>
                            <field name='warn_header'/>
                            <field name='warn_footer'/>
                            <group col='3' colspan='4'>
                                <label string='Task: %%(name)s'/>
                                <label string='User: %%(user_id)s'/>
                                <label string='ID: %%(task_id)s'/>
                                <label string='Status: %%(state)s'/>
                                <label string='Date Start: %%(date_start)s'/>
                                <label string='Date Stop: %%(date_stop)s'/>
                            </group>
                            <separator string='Taxes' colspan='4'/>
                            <field name='tax_ids' nolabel='1' colspan='4'/>
                        </page>
                        <page string='Tasks'>
                            <field name='tasks' nolabel='1' widget='one2many_list' colspan='4'>
                                <form string='Task edition'>
                                    <notebook>
                                        <page string='Task definition'>
                                            <separator string='Task Information' colspan='4'/>
                                            <field name='name' select='1'/>
                                            <field name='active' select='1'/>
                                            <field name='sequence'/>
                                            <field name='priority' select='1'/>
                                            <field name='user_id' select='1'/>
                                            <field name='date_deadline' select='1'/>
                                            <field name='date_start' select='1'/>
                                            <field name='date_close' select='1'/>
                                            <field name='progress'/>
                                            <newline/>
                                            <field name='planned_hours' widget='float_time'/>
                                            <field name='effective_hours' widget='float_time'/>
                                            <separator string='Description' colspan='4'/>
                                            <field name='description' nolabel='1' colspan='4'/>
                                            
                                            <group col='11' colspan='4'>
                                                <field name='state' select='1'/>
                                                <button name='do_draft' type='object' states='open' string='Set Draft'/>
                                                <button name='do_open' type='object' states='pending,draft' string='Open task'/>
                                                <button name='do_reopen' type='object' states='done,cancelled' string='Re-open'/>
                                                <button name='do_pending' type='object' states='open' string='Set pending'/>
                                                <button name='%(wizard_close_task)d' type='action' states='pending,open' string='Done'/>
                                                <button name='%(wizard_delegate_task)d' groups='base.group_extended' type='action' states='pending,open' string='Delegate'/>
                                                <button name='do_cancel' type='object' states='draft,open,pending' string='Cancel'/>
                                            </group>
                                        </page>
                                        <page string='Work done'>
                                            <separator string='Work done' colspan='4'/>
                                            <field name='work_ids' nolabel='1' colspan='4'/>
                                        </page>
                                        <page string='Others'>
                                            <separator string='Notes' colspan='4'/>
                                            <field name='invoice_id' readonly='True' colspan='4'/>
                                            <field name='notes' nolabel='1' colspan='4'/>
                                            <newline/>
                                            <field name='type'/>
                                            <field name='billable' select='1'/>
                                            <field name='start_sequence'/>
                                            <field name='child_ids' nolabel='1' colspan='4'>
                                                <tree string='Delegated tasks'>
                                                    <field name='name'/>
                                                    <field name='user_id'/>
                                                    <field name='date_deadline'/>
                                                    <field name='planned_hours' widget='float_time'/>
                                                    <field name='effective_hours' widget='float_time'/>
                                                    <field name='state'/>
                                                </tree>
                                            </field>
                                            <field name='parent_id' colspan='4'/>
                                        </page>
                                    </notebook>
                                </form>
                                <tree colors='red:date_deadline&lt;current_date and state==&apos;draft&apos;;blue:date_deadline==current_date and state==&apos;draft&apos;;grey:state==&apos;cancel&apos; or state==&apos;close&apos;' string='All tasks'>
                                    <field name='sequence'/>
                                    <field name='name'/>
                                    <field name='user_id'/>
                                    <field name='date_deadline'/>
                                    <field name='planned_hours' widget='float_time'/>
                                    <field name='effective_hours' widget='float_time'/>
                                    <field name='state'/>
                                </tree>
                            </field>
                        </page>
                        <page string='Notes'>
                            <field name='notes' nolabel='1' colspan='4'/>
                        </page>
                    </notebook>
                    <newline/>
                </form>
            </field>
        </record>
        <record id='view_project' model='ir.ui.view'>
            <field name='name'>project.project.tree</field>
            <field name='model'>project.project</field>
            <field name='type'>tree</field>
            <field name='field_parent'>child_id</field>
            <field name='arch' type='xml'>
                <tree string='Projects'>
                    <field name='name'/>
                    <field name='manager'/>
                    <field name='partner_id'/>
                    <field name='planned_hours' widget='float_time'/>
                    <field name='effective_hours' widget='float_time'/>
                    <field name='state'/>
                </tree>
            </field>
        </record>
        <record id='open_view_all_project' model='ir.actions.act_window'>
            <field name='name'>All Projects</field>
            <field name='res_model'>project.project</field>
            <field name='view_type'>tree</field>
            <field name='domain'>[('parent_id','=',False)]</field>
            <field name='view_id' ref='view_project'/>
        </record>
        <menuitem name='Project Management/All Projects' action='open_view_all_project' id='menu_all_project'/>
        
        <record id='open_view_all_project_unclosed' model='ir.actions.act_window'>
            <field name='name'>Unclosed projects</field>
            <field name='res_model'>project.project</field>
            <field name='view_type'>tree</field>
            <field name='domain'>[('parent_id','=',False),('state','&lt;&gt;','cancelled'),('state','&lt;&gt;','done')]</field>
            <field name='view_id' ref='view_project'/>
        </record>
        <menuitem name='Project Management/All Projects/Unclosed Projects' action='open_view_all_project_unclosed' id='menu_all_project_unclosed'/>
        
        
        <record id='open_view_all_project_unclosed_open' model='ir.actions.act_window'>
            <field name='name'>Open projects</field>
            <field name='res_model'>project.project</field>
            <field name='view_type'>tree</field>
            <field name='domain'>[('parent_id','=',False),('state','=','open')]</field>
            <field name='view_id' ref='view_project'/>
        </record>
        <menuitem name='Project Management/All Projects/Unclosed Projects/Open Projects' action='open_view_all_project_unclosed_open' id='menu_all_project_unclosed_open'/>
        
        
        <record id='open_view_project_open' model='ir.actions.act_window'>
            <field name='name'>Open projects</field>
            <field name='res_model'>project.project</field>
            <field name='view_type'>form</field>
            <field name='domain'>[('state','=','open')]</field>
            <field name='view_id' ref='view_project'/>
        </record>
        <menuitem name='Project Management/Configuration/Projects/Open Projects' action='open_view_project_open' id='menu_open_view_project_open'/>
        
        
        <record id='open_view_project' model='ir.actions.act_window'>
            <field name='name'>Projects</field>
            <field name='res_model'>project.project</field>
            <field name='view_type'>form</field>
            <field name='domain'>[]</field>
            <field name='view_id' ref='view_project'/>
        </record>
        <menuitem name='Project Management/Configuration/Projects' action='open_view_project' id='menu_open_view_project'/>
        
        <record id='view_task_work_form' model='ir.ui.view'>
            <field name='name'>project.task.work.form</field>
            <field name='model'>project.task.work</field>
            <field name='type'>form</field>
            <field name='arch' type='xml'>
                <form string='Task Work'>
                    <field name='name' select='1' colspan='4'/>
                    <field name='hours' widget='float_time' select='1'/>
                    <field name='date' select='1'/>
                    <field name='user_id' select='1'/>
                </form>
            </field>
        </record>
        
        <record id='view_task_work_tree' model='ir.ui.view'>
            <field name='name'>project.task.work.tree</field>
            <field name='model'>project.task.work</field>
            <field name='type'>tree</field>
            <field name='arch' type='xml'>
                <tree editable='top' string='Task Work'>
                    <field name='date'/>
                    <field name='name'/>
                    <field name='hours' widget='float_time'/>
                    <field name='user_id'/>
                </tree>
            </field>
        </record>
        
        <record id='view_my_project' model='ir.ui.view'>
            <field name='name'>project.project.tree</field>
            <field name='model'>project.project</field>
            <field name='type'>tree</field>
            <field name='field_parent'>child_id</field>
            <field name='arch' type='xml'>
                <tree string='My projects'>
                    <field name='name'/>
                    <field name='partner_id'/>
                    <field name='planned_hours' widget='float_time'/>
                    <field name='effective_hours' widget='float_time'/>
                    <field name='state'/>
                </tree>
            </field>
        </record>
        <record id='open_view_my_project' model='ir.actions.act_window'>
            <field name='name'>My projects</field>
            <field name='res_model'>project.project</field>
            <field name='view_type'>tree</field>
            <field name='domain'>[('manager', '=', uid)]</field>
            <field name='view_id' ref='view_my_project'/>
        </record>
        <menuitem name='Project Management/My Projects' action='open_view_my_project' id='menu_open_view_my_project'/>
        
        
        <record id='open_view_my_project_open_unclosed' model='ir.actions.act_window'>
            <field name='name'>My unclosed projects</field>
            <field name='res_model'>project.project</field>
            <field name='view_type'>tree</field>
            <field name='domain'>[('manager', '=', uid),('state','&lt;&gt;','cancelled'),('state','&lt;&gt;','done')]</field>
            <field name='view_id' ref='view_my_project'/>
        </record>
        <menuitem name='Project Management/My Projects/My Unclosed Projects' action='open_view_my_project_open_unclosed' id='menu_open_view_my_project_open_unclosed'/>
        
        
        <record id='open_view_my_project_open' model='ir.actions.act_window'>
            <field name='name'>My open projects</field>
            <field name='res_model'>project.project</field>
            <field name='view_type'>tree</field>
            <field name='domain'>[('manager', '=', uid),('state','=','open')]</field>
            <field name='view_id' ref='view_my_project'/>
        </record>
        <menuitem name='Project Management/My Projects/My Unclosed Projects/My Open Projects' action='open_view_my_project_open' id='menu_open_view_my_project_open'/>
        
        <!-- Task -->
        <record id='view_task_form2' model='ir.ui.view'>
            <field name='name'>project.task.form</field>
            <field name='model'>project.task</field>
            <field name='type'>form</field>
            <field name='priority' eval='2'/>
            <field name='arch' type='xml'>
                <form string='Task edition'>
                    <notebook>
                        <page string='Information'>
                            <field name='name' select='1'/>
                            <field name='project_id' required='1' select='1'/>
                            <field name='user_id' select='1'/>
                            <field name='priority'/>
                            <field name='date_deadline' select='2'/>
                            <field name='planned_hours' widget='float_time'/>
                            <separator colspan='4' string='Description'/>
                            <field name='description' nolabel='1' colspan='4' select='2'/>
                            <field name='effective_hours' widget='float_time'/>
                            <field name='progress'/>
                            <field name='work_ids' nolabel='1' colspan='4'/>
                            <newline/>
                            <group col='11' colspan='4'>
                                <field name='state' select='1'/>
                                <button name='do_draft' type='object' states='open' string='Set Draft'/>
                                <button name='do_open' type='object' states='pending,draft' string='Open'/>
                                <button name='do_reopen' type='object' states='done,cancelled' string='Re-open'/>
                                <button name='do_pending' type='object' states='open' string='Set Pending'/>
                                <button name='%(wizard_delegate_task)d' groups='base.group_extended' type='action' states='pending,open' string='Delegate'/>
                                <button name='%(wizard_close_task)d' type='action' states='pending,open' string='Done'/>
                                <button name='do_cancel' type='object' states='draft,open,pending' string='Cancel'/>
                                
                            </group>
                        </page>
                        <page groups='base.group_extended' string='Delegations'>
                            <field name='history' nolabel='1' colspan='4'/>
                            <field name='child_ids' height='150' nolabel='1' colspan='4'>
                                <tree string='Delegated tasks'>
                                    <field name='name'/>
                                    <field name='user_id'/>
                                    <field name='date_deadline'/>
                                    <field name='planned_hours' widget='float_time'/>
                                    <field name='effective_hours' widget='float_time'/>
                                    <field name='state'/>
                                </tree>
                            </field>
                            <field name='parent_id' colspan='4'/>
                        </page>
                        <page groups='base.group_extended' string='Extra Info'>
                            <field name='date_start' select='2'/>
                            <field name='date_close' select='2'/>
                            <field name='type'/>
                            <field name='sequence'/>
                            <field name='active' select='2'/>
                            <field name='start_sequence'/>
                            <field name='partner_id' select='2'/>
                            <newline/>
                            <field name='invoice_id'/>
                            <field name='billable' select='2'/>
                            <separator colspan='4' string='Notes'/>
                            <field name='notes' nolabel='1' colspan='4'/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>
        <record id='view_task_tree2' model='ir.ui.view'>
            <field name='name'>project.task.tree</field>
            <field name='model'>project.task</field>
            <field name='type'>tree</field>
            <field name='priority' eval='2'/>
            <field name='arch' type='xml'>
                <tree colors='grey:state in (&apos;cancel&apos;,&apos;done&apos;);blue:state==&apos;pending&apos;' string='Tasks'>
                    <field name='sequence'/>
                    <field name='name'/>
                    <field name='project_id'/>
                    <field name='user_id'/>
                    <field name='date_deadline'/>
                    <field name='planned_hours' sum='Planned hours' widget='float_time'/>
                    <field name='effective_hours' sum='Effective hours' widget='float_time'/>
                    <field name='priority'/>
                    <field name='state'/>
                </tree>
            </field>
        </record>
        
        <record id='view_task_calendar' model='ir.ui.view'>
            <field name='name'>project.task.calendar</field>
            <field name='model'>project.task</field>
            <field name='type'>calendar</field>
            <field name='priority' eval='2'/>
            <field name='arch' type='xml'>
                <calendar date_delay='planned_hours' color='user_id' string='Tasks' date_start='date_start'>
                    <field name='name'/>
                    <field name='project_id'/>
                </calendar>
            </field>
        </record>
        
        <record id='action_view_task' model='ir.actions.act_window'>
            <field name='name'>All Tasks</field>
            <field name='res_model'>project.task</field>
            <field name='view_type'>form</field>
            <field name='view_mode'>tree,form,calendar</field>
            <field name='view_id' eval='False'/>
        </record>
        <menuitem name='Project Management/All Tasks' action='action_view_task' id='menu_action_view_task'/>
        
        <record id='action_view_task2' model='ir.actions.act_window'>
            <field name='name'>Unbilled closed tasks</field>
            <field name='res_model'>project.task</field>
            <field name='view_type'>form</field>
            <field name='view_mode'>tree,form</field>
            <field name='domain'>[('state','=','done'), ('billable','=',True), ('invoice_id','=',False)]</field>
        </record>
        <menuitem name='Project Management/All Tasks/Billable Tasks' groups='base.group_extended' id='menu_action_billable'/>
        
        <menuitem name='Project Management/All Tasks/Billable Tasks/Unbilled Closed Tasks' action='action_view_task2' id='menu_action_view_task2'/>
        
        <record id='action_view_task3' model='ir.actions.act_window'>
            <field name='name'>Unbilled open tasks</field>
            <field name='res_model'>project.task</field>
            <field name='view_type'>form</field>
            <field name='view_mode'>tree,form</field>
            <field name='domain'>[('state','=','open'), ('billable','=',True), ('invoice_id','=',False)]</field>
        </record>
        <menuitem name='Project Management/All Tasks/Billable Tasks/Unbilled Open Tasks' action='action_view_task3' id='menu_action_view_task3'/>
        
        <record id='action_view_task4' model='ir.actions.act_window'>
            <field name='name'>My Tasks</field>
            <field name='res_model'>project.task</field>
            <field name='view_type'>form</field>
            <field name='domain'>[('user_id', '=', uid)]</field>
            <field name='view_id' ref='view_task_form2'/>
        </record>
        <menuitem name='Project Management/' action='action_view_task4' id='menu_action_view_task4'/>
        
        <record id='action_view_task5_pending' model='ir.actions.act_window'>
            <field name='name'>My Pending Tasks</field>
            <field name='res_model'>project.task</field>
            <field name='view_type'>form</field>
            <field name='view_mode'>tree,form</field>
            <field name='domain'>[('user_id', '=', uid),('state','=','pending')]</field>
        </record>
        <menuitem name='Project Management/My Tasks/' action='action_view_task5_pending' id='menu_tasks_yours_pending'/>
        
        <record id='action_view_task5' model='ir.actions.act_window'>
            <field name='name'>My Open Tasks</field>
            <field name='res_model'>project.task</field>
            <field name='view_type'>form</field>
            <field name='view_mode'>tree,form</field>
            <field name='domain'>[('user_id', '=', uid),('state','=','open')]</field>
        </record>
        <menuitem name='Project Management/My Tasks/' action='action_view_task5' id='menu_tasks_yours'/>
        
        <record id='action_view_task5_prog' model='ir.actions.act_window'>
            <field name='name'>My Tasks in Progress</field>
            <field name='res_model'>project.task</field>
            <field name='view_type'>form</field>
            <field name='view_mode'>tree,form</field>
            <field name='domain'>[('user_id', '=', uid),('state','=','open')]</field>
        </record>
        <menuitem name='Project Management/My Tasks/' action='action_view_task5_prog' id='menu_tasks_yours_prog'/>
        
        <record id='action_view_task6' model='ir.actions.act_window'>
            <field name='name'>Open Tasks</field>
            <field name='res_model'>project.task</field>
            <field name='view_type'>form</field>
            <field name='view_mode'>tree,form</field>
            <field name='domain'>[('state', '=', 'open')]</field>
        </record>
        <menuitem name='Project Management/All Tasks/' action='action_view_task6' id='menu_action_view_task6'/>
        
        <record id='action_view_task6_prog' model='ir.actions.act_window'>
            <field name='name'>Tasks in Progress</field>
            <field name='res_model'>project.task</field>
            <field name='view_type'>form</field>
            <field name='view_mode'>tree,form</field>
            <field name='domain'>[('state', '=', 'progress')]</field>
        </record>
        <menuitem name='Project Management/All Tasks/' action='action_view_task6_prog' id='menu_action_view_task6_prog'/>
        
        <record id='action_view_task7' model='ir.actions.act_window'>
            <field name='name'>Unassigned Tasks</field>
            <field name='res_model'>project.task</field>
            <field name='view_type'>form</field>
            <field name='view_mode'>tree,form</field>
            <field name='domain'>[('user_id', '=', False)]</field>
        </record>
        <menuitem name='Project Management/All Tasks/' action='action_view_task7' id='menu_action_view_task7'/>
        
        <!-- Opening task when double clicking on project -->
        <record id='dblc_proj' model='ir.actions.act_window'>
            <field name='res_model'>project.task</field>
            <field name='name'>Project's tasks</field>
            <field name='view_type'>form</field>
            <field name='view_mode'>tree,form</field>
            <field name='domain'>[('project_id', 'child_of', [active_id])]</field>
        </record>
        <record id='ir_project_task_open' model='ir.values'>
            <field name='key2' eval=' &apos;tree_but_open&apos;'/>
            <field name='model' eval='&apos;project.project&apos;'/>
            <field name='name'>View project's tasks</field>
            <field name='value' eval='&apos;ir.actions.act_window,&apos;+str(dblc_proj)'/>
            <field name='object' eval='True'/>
        </record>
        
        <!-- Task types -->
        <record id='task_type_edit' model='ir.ui.view'>
            <field name='name'>project.task.type.form</field>
            <field name='model'>project.task.type</field>
            <field name='type'>form</field>
            <field name='arch' type='xml'>
                <form string='Task type'>
                    <field name='name' colspan='4' select='1'/>
                    <field name='description' colspan='4' select='1'/>
                </form>
            </field>
        </record>
        <record id='task_type_tree' model='ir.ui.view'>
            <field name='name'>project.task.type.tree</field>
            <field name='model'>project.task.type</field>
            <field name='type'>tree</field>
            <field name='arch' type='xml'>
                <tree string='Task type'>
                    <field name='name'/>
                </tree>
            </field>
        </record>
        <record id='open_task_type_form' model='ir.actions.act_window'>
            <field name='name'>Task Types</field>
            <field name='res_model'>project.task.type</field>
            <field name='view_type'>form</field>
            <field name='view_id' ref='task_type_tree'/>
        </record>
        <menuitem name='Project Management/Configuration/Task Types' action='open_task_type_form' id='menu_task_types'/>
        
        <act_window name='User&apos;s projects' view_type='form' domain='[(&apos;manager&apos;, &apos;=&apos;, active_id)]' id='act_res_users_2_project_project' src_model='res.users' view_mode='tree,form' res_model='project.project'/>
        
        <act_window name='Opened tasks' view_type='form' domain='[(&apos;project_id&apos;, &apos;=&apos;, active_id),(&apos;state&apos;, &apos;&lt;&gt;&apos;, &apos;cancelled&apos;),(&apos;state&apos;, &apos;&lt;&gt;&apos;, &apos;done&apos;)]' id='act_project_project_2_project_task_opened' src_model='project.project' view_mode='tree,form' res_model='project.task'/>
        
        <act_window name='Assigned tasks' view_type='form' domain='[(&apos;user_id&apos;, &apos;=&apos;, active_id),(&apos;state&apos;, &apos;&lt;&gt;&apos;, &apos;cancelled&apos;),(&apos;state&apos;, &apos;&lt;&gt;&apos;, &apos;done&apos;)]' id='act_res_users_2_project_task_opened' src_model='res.users' view_mode='tree,form' res_model='project.task'/>
        
        <act_window name='Month works' view_type='form' domain='[(&apos;user_id&apos;, &apos;=&apos;, active_id),(&apos;date&apos;, &apos;&gt;=&apos;, time.strftime(&apos;%Y-%m-01&apos;))]' id='act_res_users_2_project_task_work_month' src_model='res.users' view_mode='tree,form' res_model='project.task.work'/>
        
    </data>
</terp>
